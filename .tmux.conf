# ==============================================================================
# TMUX CONFIGURATION FILE
# ==============================================================================

# ------------------------------------------------------------------------------
# PREFIX KEY CONFIGURATION
# ------------------------------------------------------------------------------
# Change prefix from default C-b to C-a for easier access
unbind C-b 
set -g prefix C-a
bind C-a send-prefix

# ------------------------------------------------------------------------------
# MOUSE SUPPORT
# ------------------------------------------------------------------------------
# Enable mouse support for pane selection, resizing, and scrolling
set -g mouse on

# ------------------------------------------------------------------------------
# TERMINAL SETTINGS
# ------------------------------------------------------------------------------
# Set default terminal to support 256 colors
set -g default-terminal "tmux-256color"
# Enable true color support for xterm-256color terminals
set-option -ga terminal-overrides ",xterm-256color:Tc"

# ------------------------------------------------------------------------------
# VISUAL MODE / COPY MODE STYLING
# ------------------------------------------------------------------------------
# Set copy mode visual selection colors (black text on red background)
setw -g mode-style 'fg=black bg=red bold'

# ------------------------------------------------------------------------------
# PANE STYLING
# ------------------------------------------------------------------------------
# Set inactive pane border color to red
set -g pane-border-style 'fg=red'
# Set active pane border color to yellow
set -g pane-active-border-style 'fg=yellow'

# ------------------------------------------------------------------------------
# INDEXING
# ------------------------------------------------------------------------------
# Start window numbering at 1 instead of 0 for easier keyboard access
set -g base-index 1
# Start pane numbering at 1 instead of 0
set -g pane-base-index 1

# ------------------------------------------------------------------------------
# COPY MODE CONFIGURATION
# ------------------------------------------------------------------------------
# Use vi-style key bindings in copy mode
setw -g mode-keys vi
# Copy selection to system clipboard using xclip on mouse drag end
bind-key -T copy-mode-vi MouseDragEnd1Pane send-keys -X copy-pipe-and-cancel "xclip -selection clipboard -i"
# Copy selection to system clipboard using xclip on Enter key
bind-key -T copy-mode-vi Enter send-keys -X copy-pipe-and-cancel "xclip -selection clipboard -i"

# ------------------------------------------------------------------------------
# WINDOW SETTINGS
# ------------------------------------------------------------------------------
# Disable automatic window renaming
set-option -wg automatic-rename off
# Create new windows in the current pane's directory
bind c new-window -c "#{pane_current_path}"

# ------------------------------------------------------------------------------
# HISTORY SETTINGS
# ------------------------------------------------------------------------------
# Increase scrollback buffer size from default 2000 to 100000 lines
set-option -g history-limit 100000

# ------------------------------------------------------------------------------
# WINDOW NAVIGATION
# ------------------------------------------------------------------------------
# Bind PageUp to switch to previous window
bind-key -n PageUp previous-window
# Bind PageDown to switch to next window
bind-key -n PageDown next-window

# ------------------------------------------------------------------------------
# STATUS LINE STYLING - CATPPUCCIN MOCHA
# ------------------------------------------------------------------------------
# for background color and all, use gogh.
# alias gogh= bash ...
# Catppuccin Mocha color palette
set -g @catppuccin_rosewater "#f5e0dc"
set -g @catppuccin_flamingo "#f2cdcd"
set -g @catppuccin_pink "#f5c2e7"
set -g @catppuccin_mauve "#cba6f7"
set -g @catppuccin_red "#f38ba8"
set -g @catppuccin_maroon "#eba0ac"
set -g @catppuccin_peach "#fab387"
set -g @catppuccin_yellow "#f9e2af"
set -g @catppuccin_green "#a6e3a1"
set -g @catppuccin_teal "#94e2d5"
set -g @catppuccin_sky "#89dceb"
set -g @catppuccin_sapphire "#74c7ec"
set -g @catppuccin_blue "#89b4fa"
set -g @catppuccin_lavender "#b4befe"
set -g @catppuccin_text "#cdd6f4"
set -g @catppuccin_subtext1 "#bac2de"
set -g @catppuccin_subtext0 "#a6adc8"
set -g @catppuccin_overlay2 "#9399b2"
set -g @catppuccin_overlay1 "#7f849c"
set -g @catppuccin_overlay0 "#6c7086"
set -g @catppuccin_surface2 "#585b70"
set -g @catppuccin_surface1 "#45475a"
set -g @catppuccin_surface0 "#313244"
set -g @catppuccin_base "#1e1e2e"
set -g @catppuccin_mantle "#181825"
set -g @catppuccin_crust "#11111b"

# Enable status bar
set -g status on
# Update status bar every 5 seconds
set -g status-interval 5
# Center the window list in the status bar
set -g status-justify centre

# Status bar colors
set -g status-style "bg=#{@catppuccin_base} fg=#{@catppuccin_text}"

# Left status bar: Session name
set -g status-left-length 40
set -g status-left "#[fg=#{@catppuccin_base},bg=#{@catppuccin_mauve},bold] #S #[fg=#{@catppuccin_mauve},bg=#{@catppuccin_base}]"

# Right status bar: Empty (no time needed)
set -g status-right-length 40
# set -g status-right ""

# Window status format (inactive windows)
set -g window-status-format "#[fg=#{@catppuccin_text},bg=#{@catppuccin_base}] #W#F "

# Window status format (active window)
set -g window-status-current-format "#[fg=#{@catppuccin_base},bg=#{@catppuccin_blue}]#[fg=#{@catppuccin_base},bg=#{@catppuccin_blue},bold] #W#F #[fg=#{@catppuccin_blue},bg=#{@catppuccin_base}]"

# Window status separator
set -g window-status-separator ""

# ------------------------------------------------------------------------------
# CONFIGURATION RELOAD
# ------------------------------------------------------------------------------
# Reload tmux configuration file with 'prefix + R'
# Note: conflicts with tmux-resurrect plugin
bind R source-file ~/.tmux.conf \; display-message "Config reloaded" \; refresh-client -S

# ==============================================================================
# PLUGINS
# ==============================================================================
# TPM (Tmux Plugin Manager) Installation:
# git clone https://github.com/tmux-plugins/tpm ~/.tmux/plugins/tpm
# Then run: tmux source ~/.tmux.conf (from within tmux)
# Press prefix + I to install plugins
# ------------------------------------------------------------------------------

# TPM plugin manager (required)
set -g @plugin 'tmux-plugins/tpm'

# tmux-yank: Enhanced clipboard integration
set -g @plugin 'tmux-plugins/tmux-yank'

# Commented out plugins (uncomment to enable):
# tmux-resurrect: Save and restore tmux sessions
# set -g @plugin 'tmux-plugins/tmux-resurrect'

# vim-tmux-navigator: Seamless navigation between vim and tmux panes
# set -g @plugin 'christoomey/vim-tmux-navigator'

# ------------------------------------------------------------------------------
# INITIALIZE TPM
# ------------------------------------------------------------------------------
# Initialize TMUX plugin manager (keep this line at the very bottom)
run '~/.tmux/plugins/tpm/tpm'
